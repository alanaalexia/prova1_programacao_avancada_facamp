<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Formulário</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }

    header {
      color: blue;
      font-weight: bold;
      font-size: larger;
      text-align: center;
      margin-bottom: 16px;
      font-family: Arial, sans-serif;
    }

    /* ===== LAYOUT SIMPLES, TUDO ALINHADO ===== */
    #myForm {
      display: grid;
      grid-template-columns: 162px 1fr; /* mesma largura do seu .alinha */
      gap: 8px 12px;                    /* espaçamento discreto */
      align-items: center;
      max-width: 680px;
      margin: 0 auto;
    }

    /* mantém o estilo simples dos campos (sem padding/largura forçada) */
    select, textarea, option, input { color: rgb(46,46,46); }

    /* compatibilidade com seu rótulo à esquerda */
    .alinha { display: inline-block; width: 162px; }

    /* grupos mínimos para rádios e checkboxes */
    .radio-group { display: flex; gap: 16px; align-items: center; }
    .checkbox-group { display: flex; flex-direction: column; gap: 4px; }

    /* centraliza verticalmente o rótulo "Estilos:" */
    .v-center { align-self: center; }

    /* ações: cada botão ocupa sua coluna */
    .actions { justify-self: start; }
    .button { font-weight: bolder; cursor: pointer; }

    /* seus rótulos customizados */
    label  { font-weight: bold; color: green; }
    label2 { font-weight: bold; color: red; }
    label1 { font-weight: bold; color: rgb(109,109,109); font-family: monospace; }
  </style>
</head>
<body>

  <header>Formulário</header>

  <form id="myForm" novalidate onsubmit="return handleSubmit(event)">
    <label for="nome" class="alinha">Nome completo:</label>
    <input type="text" id="nome" name="nome" placeholder="Adão Primeiro">

    <label for="cpf" class="alinha">CPF:</label>
    <input type="text" id="cpf" name="cpf" placeholder="000.111.222-33">

    <label for="email" class="alinha">Email:</label>
    <input type="text" id="email" name="email" placeholder="adao@dominio">

    <label for="senha" class="alinha">Senha:</label>
    <input type="password" id="senha" name="senha" placeholder="mín. 12 caracteres">

    <label for="telefone" class="alinha">Telefone para contato:</label>
    <input type="text" id="telefone" name="telefone" placeholder="19999991111" inputmode="numeric">

    <label for="datanasc" class="alinha">Data de nascimento:</label>
    <input type="date" id="datanasc" name="datanasc">

    <label for="datainsc" class="alinha">Data de inscrição:</label>
    <input type="date" id="datainsc" name="datainsc">

    <label2 for="instrumentos" class="alinha">Instrumento musical:</label2>
    <select name="instrumentos" id="instrumentos">
      <option value="guitarra">Guitarra</option>
      <option value="piano">Piano</option>
      <option value="saxofone">Saxofone</option>
      <option value="violao">Violão</option>
    </select>

    <label2 class="alinha">Profissional?</label2>
    <div class="radio-group">
      <label1><input type="radio" id="sim" name="pprof" value="sim"> Sim</label1>
      <label1><input type="radio" id="nao" name="pprof" value="nao"> Não</label1>
    </div>

    <label2 class="alinha v-center">Estilos:</label2>
    <div class="checkbox-group">
      <label1><input type="checkbox" id="rockroll" name="estilos" value="rockroll"> Rock &amp; Roll</label1>
      <label1><input type="checkbox" id="pop" name="estilos" value="pop"> Pop</label1>
      <label1><input type="checkbox" id="bossanova" name="estilos" value="bossanova"> Bossa Nova</label1>
      <label1><input type="checkbox" id="samba" name="estilos" value="samba"> Samba</label1>
    </div>

    <!-- Enviar na 1ª coluna -->
    <div class="actions">
      <button class="button" type="submit">Enviar</button>
    </div>
    <!-- Limpar na 2ª coluna -->
    <div class="actions">
      <button class="button" type="button" onclick="handleReset()">Limpar</button>
    </div>
  </form>

  <script>
    // ==== UTILIDADES ====
    const ACCENTS = "A-Za-zÀ-ÖØ-öø-ÿ";
    const onlyLettersAndAt = (s) => new RegExp(`^[${ACCENTS}]+@[${ACCENTS}]+$`).test(s);
    const stripDigits = (s) => s.replace(/\D/g, "");

    function isCPFValid(cpfRaw) {
      const cpf = stripDigits(cpfRaw);
      if (!/^\d{11}$/.test(cpf) || /^(\d)\1{10}$/.test(cpf)) return false;
      let sum = 0;
      for (let i = 0; i < 9; i++) sum += parseInt(cpf[i], 10) * (10 - i);
      let dv1 = 11 - (sum % 11); if (dv1 >= 10) dv1 = 0;
      if (dv1 !== parseInt(cpf[9], 10)) return false;
      sum = 0;
      for (let i = 0; i < 10; i++) sum += parseInt(cpf[i], 10) * (11 - i);
      let dv2 = 11 - (sum % 11); if (dv2 >= 10) dv2 = 0;
      if (dv2 !== parseInt(cpf[10], 10)) return false;
      return true;
    }

    function parseDateYMD(ymd) {
      const [y, m, d] = (ymd || "").split("-").map(Number);
      if (!y || !m || !d) return null;
      return new Date(y, m - 1, d, 12);
    }

    function todayYMD() {
      const now = new Date();
      const yyyy = now.getFullYear();
      const mm = String(now.getMonth() + 1).padStart(2, "0");
      const dd = String(now.getDate()).padStart(2, "0");
      return `${yyyy}-${mm}-${dd}`;
    }

    // ==== LIMPAR ====
    function handleReset() {
      const form = document.getElementById("myForm");
      form.reset();
      document.getElementById("nome").focus();
    }
    window.handleReset = handleReset;

    // ==== ENVIAR / VALIDAR ====
    function handleSubmit(event) {
      event.preventDefault();
      const form = document.getElementById("myForm");

      const nome = form.nome.value.trim();
      const cpf = form.cpf.value.trim();
      const email = form.email.value.trim();
      const senha = form.senha.value;
      const telefone = form.telefone.value.trim();
      const datanasc = form.datanasc.value;
      const datainsc = form.datainsc.value;
      const instrumento = form.instrumentos.value;
      const profChecked = form.querySelector('input[name="pprof"]:checked');
      const estilosChecked = form.querySelectorAll('input[name="estilos"]:checked');

      const errors = [];

      if (!nome || !cpf || !email || !senha || !telefone || !datanasc || !datainsc || !instrumento) {
        errors.push("Preencha todos os campos de texto, data e seleção.");
      }
      if (!profChecked) errors.push("Selecione se é profissional (Sim/Não).");
      if (estilosChecked.length === 0) errors.push("Selecione ao menos um estilo musical.");

      if (nome) {
        if (/\d/.test(nome)) errors.push("O nome completo não pode conter números.");
        if (nome.trim().split(/\s+/).filter(Boolean).length < 2) {
          errors.push("Informe ao menos nome e sobrenome.");
        }
      }

      if (cpf && !isCPFValid(cpf)) errors.push("CPF inválido (formato/dígitos verificadores).");

      if (email && !onlyLettersAndAt(email)) {
        errors.push("E-mail deve conter apenas letras e um '@' (ex.: joao@dominio).");
      }

      if (senha) {
        if (senha.length < 12) errors.push("A senha deve ter pelo menos 12 caracteres.");
        if (!/[A-Z]/.test(senha)) errors.push("A senha deve conter ao menos uma letra maiúscula.");
        if (!/\d/.test(senha)) errors.push("A senha deve conter ao menos um dígito numérico.");
      }

      if (telefone && !/^\d{1,15}$/.test(telefone)) {
        errors.push("Telefone deve conter apenas dígitos (máx. 15).");
      }

      if (datanasc) {
        const dn = parseDateYMD(datanasc);
        const min = new Date(1980, 0, 1, 12);
        const max = new Date(2005, 11, 31, 12);
        if (!dn || dn < min || dn > max) {
          errors.push("Data de nascimento deve estar entre 01/01/1980 e 31/12/2005.");
        }
      }

      if (datainsc) {
        const di = parseDateYMD(datainsc);
        const year = Number(datainsc.slice(0, 4));
        const hojeStr = todayYMD();
        if (year !== 2025) errors.push("A data de inscrição deve estar no ano de 2025.");
        if (!(datainsc < hojeStr)) errors.push("A data de inscrição deve ser anterior à data de hoje.");
        if (!di) errors.push("Data de inscrição inválida.");
      }

      if (errors.length > 0) {
        alert("Erros encontrados:\n- " + errors.join("\n- "));
        return false;
      }

      alert("Formulário enviado com sucesso!");
      form.reset();
      document.getElementById("nome").focus();
      return false;
    }
    window.handleSubmit = handleSubmit;
  </script>

</body>
</html>
